{% extends 'base.html' %}
{% block content %}
<div class="container mx-auto py-8">
    <h1 class="text-3xl font-bold text-center mb-8">Menu</h1>
    <div class="w-full">
        <!-- Category Bar -->
        <div class="w-full mb-8">
            {% for category in categories %}
            <button
                class="category-toggle bg-gray-200 text-gray-800 font-semibold py-2 px-4 w-full text-left rounded-lg mb-2">{{ category.name }}</button>
            <div class="hidden" id="menu-items-{{ category.id }}">
                <ul class="align-middle">
                    {% for cat, items in menu_items %}
                        {% if cat == category %}
                            {% for item in items %}
                                <li>{{ item.name }}
                                    <button
                                        class="max-price-btn bg-gray-200 text-gray-800 font-semibold py-2 px-4 ml-4 rounded-lg mb-2">{{ item.max_price }}</button>
                                </li>
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
<div class="hidden fixed top-0 left-0 w-full h-full bg-gray-900 bg-opacity-50" id="myModal">
    <div class="bg-white p-8 max-w-sm mx-auto rounded-lg absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2">
        <button class="absolute top-2 right-2 text-gray-500 hover:text-gray-700" id="closeModal">&times;</button>
        <h2 class="text-xl font-bold mb-4" id="modalTitle">Add Quantity</h2>
        <p>Menu Item: <span id="itemName"></span></p>
<!--        <div class="my-4">-->
<!--            <label class="block mb-2">Half Portion:</label>-->
<!--            <div class="flex items-center">-->
<!--                <button class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-l-lg" id="decreaseHalfQty">-</button>-->
<!--                <input type="text" class="border border-gray-300 rounded-none py-2 px-4 w-16 text-center" id="halfQuantity" value="1">-->
<!--                <button class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-r-lg" id="increaseHalfQty">+</button>-->
<!--            </div>-->
<!--        </div>-->
        <div class="my-4">
            <label class="block mb-2">Full Portion:</label>
            <div class="flex items-center">
                <button class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-l-lg" id="decreaseFullQty">-</button>
                <input type="text" class="border border-gray-300 rounded-none py-2 px-4 w-16 text-center" id="fullQuantity" value="1">
                <button class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-r-lg" id="increaseFullQty">+</button>
            </div>
        </div>
        <div class="flex justify-end">
            <a href="{{ object.get_add_to_cart_url }}" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Add to Cart</a>
        </div>
    </div>
</div>

<script>
    document.querySelectorAll('.category-toggle').forEach(button => {
        button.addEventListener('click', () => {
            button.nextElementSibling.classList.toggle('hidden');
        });
    });

    document.querySelectorAll('.max-price-btn').forEach(button => {
        button.addEventListener('click', () => {
            document.getElementById('myModal').classList.remove('hidden');
        });
    });

    document.getElementById('closeModal').addEventListener('click', () => {
        document.getElementById('myModal').classList.add('hidden');
    });

    window.addEventListener('click', (event) => {
        const modal = document.getElementById('myModal');
        if (event.target === modal) {
            modal.classList.add('hidden');
        }
    });

    // Quantity adjustment logic // const adjustQuantity = (inputId, increment) => {
    //     const input = document.getElementById(inputId);
    //     let value = parseInt(input.value, 10);
    //     value = isNaN(value) ? 1 : value;
    //     value = increment ? value + 1 : value - 1;
    //     if (value < 1) value = 1;
    //     input.value = value;
    // };
    //
    // document.getElementById('increaseHalfQty').addEventListener('click', () => adjustQuantity('halfQuantity', true));
    // document.getElementById('decreaseHalfQty').addEventListener('click', () => adjustQuantity('halfQuantity', false));
    // document.getElementById('increaseFullQty').addEventListener('click', () => adjustQuantity('fullQuantity', true));
    // document.getElementById('decreaseFullQty').addEventListener('click', () => adjustQuantity('fullQuantity', false));

</script>

{% endblock %}
